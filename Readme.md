# Trading Adventure
Это небольшая игра, сделанная на Unity.
Когда я задумывал эту игру, мне хотелось попробовать и увидеть различия между разными способами разделить проект на модель и отображение.

## Геймплей
К игроку приходят клиенты, которые предлагают обменять один товар на другой. 
Игрок может согласиться или отказаться.
У клиентов могут разные предстваления о ценности того или иного товара.
Также на объем сделок, количество качество клиентов влияют характеристики дня настраиваемые игроком.
Кроме того, на выручку с обменов товарами игрок может покупать различные улучшения, которые могут влиять на те же характеристики

## Посмотреть видео с игрой
TODO: Залью, когда и если будет выглядеть получше

## Поиграть
TODO: Залью, когда и если будет выглядеть получше

## Особенность
Код игры разбит на пять частей. Каждая часть реализована своим MV-паттерном
Каждый слой находится в своем Assembly Definition

### MVC. Товары
_Представление отображает приложение и реагирует на изменения в модели
Контроллер сообщает модели действия пользователя_

Представление отображает вид и количество тоаваров и реагирует на изменения в модели
Контроллер реагирует на на нажатие кнопок на сцене Goods, и сообщает модели о том, что действия пользователя требуют изменния модели

### MVP-PassiveView. Сделка
_В модели происходит бизнес-логика и работа с данными
В презентере работа с отображением
Слой отображения отображения не содержит логики_

Отображение оповещает о нажатии кнопок согласия или отказа от сделки.
Презентер определяет, что сообщить модели, исходя из нажатых кнопок, и то, когда и что нужно показывать в меню сделки.
В модели происходит формирование сделки и взаимодействие с моделью товаров в случае успешного согласия на обмен

### MVA. Клиент
_Модель - слой работы с данными
В адаптере содержится бизнес-логика
В отображении логика отображения_

Слой модели только предоставляет доступ к конфигам
Отображение определяет, как будет выглядеть клиент
Адаптер же формирует сделку, исходя из предпочтений клиента

### MVVM. День
_Данные модели и отображаения находятся в двустороннем биндинге_

Характеристики дня двусторонне связан со своими значеними на слайдерах. 
Сумма характеристик всегда должна сохранятся, поэтому при измении одной, остальные меняются. И отображениение меняется за ним.
Биндинг реализован с помощью интерфейса System.ComponentModel.INotifyPropertyChanged

### MVP-ActiveView. Улучшения
_В модели данные и бизнес-логика. В отображении логика отображения. Презентер - связующее звено_

Модель хранит состояние купленности и цену. Взаимодйствует с инвентарем и формирует конфигурации дня. 
Отображение это отображает. Презентер здесь играет только роль посредника

## Развитие
Можно было бы сделать отдельные слои-интерфейсы для каждой взаимодействующей пары вертикальных разрезов, но я не стал это делать, чтобы не усложнять

### Логика
- Не обновляется видимый статус возможности купить улучшение после траты ресурсов. Нужно обновлять меню, чтобы обводка покупки была окрашена в нужный цвет
- Может такое быть, что у игрока не будет достаточно товаров для обмена даже с самыми низкими коээфициентами дня и клиентов. Нужно в таком случае вводить еще один коэффициент стоимости сделки, дающий возможность согласиться хотя бы на несколько сделок в дне
- Также может такое быть, что товаров у игрока не осталось совсем. Должна быть возможность получить товары бесплатно
- У игрока нет причины хотеть больше клиентов в день. К тому же, длина дня - это длина одного акта игры, как-бы уровня. Ее должны контролировать мы, а не игрок. Нужно придумать другой эффект от такой характеристики дня как реклама. Например, он могла бы заставлять клиентов предлагать более выгодные сделки 


### Визуал
- При клике на уже купленое улучшение должно вылезать меню, сообщающее, что улучшение уже куплено
- Закруглить углы у меню покупки
- Цифры могли бы быть покрупнее
- Нужно добавить анимацию при трате или получении ресурсов
- Визуальная реакция игры на соврешенню сделку
- Появление и уход клиетнов, анимация появления сделки
- Анимация клиентов (сжатие, приседание, раскачивание)
- Фрукты на панели сделки сделать больше, и вывести их вверх, чтобы они выпирали над плашкой панели. Меня остановило от такого хода только качество спрайта кукурузы. Нужно найти другой спрайт или заменить кукурузу на другой товар
